<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.80.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=alternate type=application/rss+xml href=https://atc-casip.github.io/respiros/docs/events/index.xml><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/respiros/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/respiros/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/respiros/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/respiros/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/respiros/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/respiros/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/respiros/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/respiros/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/respiros/favicons/android-192x192.png sizes=192x192><title>External events communication | Respir-OS</title><meta property="og:title" content="External events communication"><meta property="og:description" content="Integrate external applications with the respirator."><meta property="og:type" content="website"><meta property="og:url" content="https://atc-casip.github.io/respiros/docs/events/"><meta property="og:site_name" content="Respir-OS"><meta itemprop=name content="External events communication"><meta itemprop=description content="Integrate external applications with the respirator."><meta name=twitter:card content="summary"><meta name=twitter:title content="External events communication"><meta name=twitter:description content="Integrate external applications with the respirator."><link rel=preload href=/respiros/scss/main.min.a40e8388f84bdd24bc3411e01a2a4a50b09036c9b079bd05a1eb025839f53861.css as=style><link href=/respiros/scss/main.min.a40e8388f84bdd24bc3411e01a2a4a50b09036c9b079bd05a1eb025839f53861.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/respiros/><span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Respir-OS</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/respiros/docs/><span class=active>Documentation</span></a></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/respiros/es/docs/events/>Español</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center d-lg-none"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/respiros/es/docs/events/>Español</a></div></div><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/respiros/docs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a></li><ul><li class="collapse show" id=respirosdocs><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/respiros/docs/events/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">External events communication</a></li><ul><li class="collapse show" id=respirosdocsevents></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><nav id=TableOfContents><ul><li><a href=#parameters><code>parameters</code></a></li><li><a href=#cycle><code>cycle</code></a></li><li><a href=#readings><code>readings</code></a></li><li><a href=#alarm><code>alarm</code></a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://atc-casip.github.io/respiros/docs/>Documentation</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://atc-casip.github.io/respiros/docs/events/>External events communication</a></li></ol></nav><div class=td-content><h1>External events communication</h1><div class=lead>Integrate external applications with the respirator.</div><p>Respir-OS publishes the events that take place during its operation so the
system&rsquo;s functionality can be extended and integrated with other platforms.
These events are published using WebSockets. Clients can connect to the socket
using libraries like <a href=https://socket.io/>Socket.IO</a> and start receiving events
and their data. In this section, these events and their data are explained in
detail.</p><h2 id=parameters><code>parameters</code></h2><p>This event contains the respirator&rsquo;s current parameters of operation. Whenever
these parameters change, a new event is published with the updated values. Also,
when a new client connects to the socket, it automatically receives an event of
this type, so it can have the current parameters from the get-go.</p><p>Along with the event, a JSON document is sent with the following variables:</p><ul><li><code>mode</code>: It&rsquo;s the respirator&rsquo;s operation mode. It can be either <code>VCP</code>
(controlled mode) or <code>VPS</code> (assisted mode).</li><li><code>ipap</code>: Inspiratory Positive Airway Pressure. Air is insufflated into the
patient&rsquo;s lungs at this pressure. Measured in centimeters of water (cmH<sub>2</sub>O).</li><li><code>epap</code>: Expiratory Positive Airway Pressure. Air is exhaled out of the lungs
at this pressure. Measured in centimeters of water (cmH<sub>2</sub>O).</li><li><code>breathing_freq</code>: The breathing frequency, measured in breaths per minute.</li><li><code>ie_relation</code>: It&rsquo;s the ratio between the time spent during inhalation and
the time spent during exhalation. For example, a 3:1 relation means that, for
each time unit spent inhaling, 3 are spent exhaling.</li><li><code>trigger</code>: The flow trigger determines when we assume exhalation has finished
and inhalation must begin. It is indicated in liters per minute (l/m).</li></ul><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JSON data-lang=JSON><span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;mode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;VPS&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;ipap&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>20.0</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;epap&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>26.0</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;breathing_freq&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>15.0</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;ie_relation&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;1:3&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;trigger&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>5.0</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h2 id=cycle><code>cycle</code></h2><p>When a new breathing cycle begins, the system calculates the monitoring values
for the cycle that just ended and triggers an event. These values are sent in a
JSON document, wich contains the following variables:</p><ul><li><code>ipap</code>: It&rsquo;s the maximum pressure achieved during the cycle. Measured in
centimeters of water (cmH<sub>2</sub>O).</li><li><code>epap</code>: It&rsquo;s the pressure when the breathing flow is zero. Measured in
centimeters of water (cmH<sub>2</sub>O).</li><li><code>breathing_freq</code>: The measured breathing frequency. As it changes shows very
little change from cycle to cycle, the value given is the mean value of the
last 3 cycles. Measured in breaths per minute.</li><li><code>tidal_volume</code>: The tidal volume is the amount of air insufflated into the
patient. Measured in mililiters (ml).</li><li><code>volume_per_minute</code>: As the name suggests, it&rsquo;s the amount of air insufflated
into the patient in a minute. Measured in liters (l).</li><li><code>oxygen_percentage</code>: The percentage of oxygen in the inhaled air.</li></ul><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JSON data-lang=JSON><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;ipap&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>22.4</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;epap&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>23.6</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;breathing_freq&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>11.2</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;tidal_volume&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>26.2</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;volume_per_minute&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>35.3</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;oxygen_percentage&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>34.2</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h2 id=readings><code>readings</code></h2><p>The system reads the values given by the sensors with very high frequency. These
readings are published in events with much lower frequency so the system doesn&rsquo;t
overload. Each reading has the following variables:</p><ul><li><code>timestamp</code>: Unix time in which the reading was made.</li><li><code>flow</code>: Air flow, in liters per minute (l/m).</li><li><code>pressure</code>: Air pressure, in centimeters of water (cmH<sub>2</sub>O).</li><li><code>volume</code>: Air volume, in mililiters (ml).</li></ul><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JSON data-lang=JSON><span style=color:#000;font-weight:700>[</span>
  <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;timestamp&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2020-11-12T12:51:00+00:00&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;flow&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>-12.8</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;pressure&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>14.3</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;volume&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>3.0</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;timestamp&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2020-11-12T12:51:00+00:02&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;flow&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>-10.3</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;pressure&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>10.2</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;volume&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0.0</span>
  <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>]</span>
</code></pre></div><h2 id=alarm><code>alarm</code></h2><p>As part of the respirator&rsquo;s control system, there are a bunch of alarms that can
be triggered when certain values exceed their limits or other conditions take
place. When these alarms are triggered, an event of this type is also sent with
the following information about the alarm:</p><ul><li><code>type</code>: The type of alarma, which can be either <code>apnea</code>, <code>disconnect</code>, <code>min_pressure</code>,
<code>max_pressure</code>, <code>min_volume</code>, <code>max_volume</code>, <code>max_frequency</code> or <code>oxygen</code>.</li><li><code>criticality</code>: The level of criticality of the alarm, which can be either
<code>normal</code> or <code>high</code>.</li></ul><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JSON data-lang=JSON><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;apnea&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;criticality&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;normal&#34;</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><div class=section-index><hr class=panel-line></div><div class="text-muted mt-5 pt-3 border-top">Last modified January 1, 0001</div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/atc-casip/respiros><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/respiros/js/main.min.796b3d32262061b410bb4568e6f2c216f4b2155a98a4555b1bc5f878a71f1c0e.js integrity="sha256-eWs9MiYgYbQQu0Vo5vLCFvSyFVqYpFVbG8X4eKcfHA4=" crossorigin=anonymous></script></body></html>